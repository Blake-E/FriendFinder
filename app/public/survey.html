<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Survey</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
	 crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
	 crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
	 crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
	 crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery.js"></script>
</head>

<body>
	<div class="container">
		<h1>Take The Survey</h1>
		<hr>
		<h2>About you</h2>
		<p>Answer all of the questions</p>
		<h3>Name: (Required)</h3>
		<input type="text" name="" id="name" class="form-control" required>
		<h3>URL for Photo: (Required)</h3>
		<input type="text" name="" id="photo" class="form-control" required>
		<hr>

		<h4>Answer how strongly you agree or disagree with the following questions:</h4>
		<hr>
		<div id="friends-choices">
			<div class="row col-lg-12">
				<h3>Question 1</h3>
				<h4>You are what you eat.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qone">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
			<div class="row col-lg-12">
				<h3>Question 2</h3>
				<h4>Chocolate ice cream is the best flavor.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qtwo">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
			<div class="row col-lg-12">
				<h3>Question 3</h3>
				<h4>Green apples taste better than red apples.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qthree">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
			<div class="row col-lg-12">
				<h3>Question 4</h3>
				<h4>Green grapes taste better than red grapes.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qfour">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
			<div class="row col-lg-12">
				<h3>Question 5</h3>
				<h4>You always fold your clothes right after they are dried.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qfive">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
			<div class="row col-lg-12">
				<h3>Question 6</h3>
				<h4>You run or bicycle at least 5 miles per week.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qsix">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
			<div class="row col-lg-12">
				<h3>Question 7</h3>
				<h4>You would consider yourself to be organized.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qseven">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
			<div class="row col-lg-12">
				<h3>Question 8</h3>
				<h4>It is wrong to eat animal products.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qeight">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
			<div class="row col-lg-12">
				<h3>Question 9</h3>
				<h4>You always look for ways to do things faster.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qnine">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
			<div class="row col-lg-12">
				<h3>Question 10</h3>
				<h4>NFL is the most entertaining sport to watch on tv.</h4>
				<div class="form-group col-xs-3">
					<select class="form-control" id="qten">
						<option>1 (Strongly Disagree)</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5 (Strongly Agree)</option>
					</select>
				</div>
			</div>
		</div>

		<div class="modal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title"></h4>
					</div>
					<div class="modal-body text-center">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<button type="submit" class="btn btn-danger btn-lg btn-block" id="submit">Submit</button>
		<br>
		<footer class="footer">
			<p>
				<a href="/api/friends">API Friends List</a>
			</p>
		</footer>
	</div>
	<script type="text/javascript">

		$(".submit").on("click", function (event) {
			event.preventDefault();
			var scores = $('.modal-title');
			var modal_body = $('.modal-body');
			var name = $('#name').val().trim();
			var photo = $('#photo').val();

			var qone = parseInt($('#qone').val());
			var qtwo = parseInt($('#qtwo').val());
			var qthree = parseInt($('#qthree').val());
			var qfour = parseInt($('#qfour').val());
			var qfive = parseInt($('#qfive').val());
			var qsix = parseInt($('#qsix').val());
			var qseven = parseInt($('#qseven').val());
			var qeight = parseInt($('#qeight').val());
			var qnine = parseInt($('#qnine').val());
			var qten = parseInt($('#qten').val());

			var userInfo = {
				name: name,
				photo: photo,
				scores: [qone, qtwo, qthree, qfour, qfive, qsix, qseven, qeight, qnine, qten]
			};
			console.log(scores);

			var newURL = window.location.origin;
			$.post(newURL + "/api/friends", userInfo, function (data) {
				if (data.name !== undefined) {
					scores.html('Your best match is: ');
					modal_body.html('<p>is: ' + data.name + '!</p><img src="' + data.photo + '" height="150">');
				} else {
					scores.html('Sorry');
					modal_body.html('<p>You have no match yet</p>');
				}
				$('.modal').modal('toggle');
			});
		});
		$('#friends-choices').reset();
	</script>
</body>
</html>